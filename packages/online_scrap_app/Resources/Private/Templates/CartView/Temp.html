<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers" data-namespace-typo3-fluid="true">
<f:layout name="Default" />

<f:section name="content">
    <h2 style="padding-left: 40%">View Cart Elements</h2>


    <f:debug>{_all}</f:debug>
    <div style="padding-left: 10%;padding-top: 1%" class="container-fluid">

    <f:if condition="{cartView==null}">
        <f:then>
            <div class="row mt-3">
                <div class="col-3">
                <h3>Cart is Empty</h3>
                </div>
            </div>

    </f:then>

    <f:else>
        <div class="row mt-3">
            <div class="col-3"><h5><f:translate key="tx_onlinescrapapp_domain_model_cartview.category" /></h5></div>
            <div class="col-3"><h5><f:translate key="tx_onlinescrapapp_domain_model_cartview.subcategory" /></h5></div>
            <div class="col-3"><h5><f:translate key="tx_onlinescrapapp_domain_model_cartview.quantity" /></h5></div>
            <div class="col-3"><h5><span>Remove</span></h5></div>

        </div>
        <f:for each="{cartView}" as="cartView" iteration="count">
            <div class="row mt-3 border-top">
                <f:for each="{cartView.category}" as="cat">
                <div class="col-3"><f:link.action action="show" arguments="{cartView : cartView}">{cat.name}</f:link.action></div>
                </f:for>
                <f:for each="{cartView.subcategory}" as="subcat">
                    <div class="col-3"><f:link.action action="show" arguments="{cartView : cartView}">{subcat.name}</f:link.action></div>
                </f:for>
                <div class="col-3"><f:link.action action="show" arguments="{cartView : cartView}">{cartView.quantity}</f:link.action></div>

                <div class="col-3"><f:link.action action="delete" arguments="{cartView : cartView}">Delete</f:link.action></div>

                <f:for each="{cartView.locality}" as="locality" >
                    <f:if condition="{count.isLast}">
                        <f:then>
                            <div class="row">

                                <div class="col-6" style="padding-left: 70%;padding-top: 14%">

                            <f:link.action  class="btn btn-success" action="selectCategory" controller="Category"  pluginName="AddToCart" pageUid="{settings.pages.category}" arguments="{locality: locality}" >Back</f:link.action>
                                </div>
                        </f:then>
                    </f:if>

                </f:for>
            </div>
        </f:for>

            <div class="col-6" style="padding-left: 25%;padding-top: 5%">

                <f:link.action  class="btn btn-success" action="newbooking" controller="Bookings" pluginName="CustomerBooking" pageUid="{settings.pages.newbookings}"  arguments="{cartView:cartView}">Book  Appointment</f:link.action>

            </div>
    </div>

    </f:else>
    </f:if>

    </div>
</f:section>
</html>
